name: "Database: CI - Test Docker Configuration"
on:
    pull_request:
      branches: 
        - database-master
jobs:
    database_build:
      runs-on: ubuntu-latest
      name: Testen, ob Docker Container erfolgreich gebaut werden kann
      steps:
        - name: Checkout Repository
          uses: actions/checkout@v2
        - name: Build Docker image
          run: docker build --build-arg password=roottoor ./ --tag onnythunder/feedibus-database:test
        - name: run Docker Container
          run: docker run -d -p 5432:5432 --name feedibus-database onnythunder/feedibus-database:test
        - name: get status of Container
          run: sleep 15 && if docker ps | grep feedibus-database; then echo "Erfolgreich. Test abgeschossen"; else echo "Fehler. Lauff√§higkeit konnte nicht festgestellt werden" && exit 1; fi